function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}import"core-js/modules/es.symbol.js";import"core-js/modules/es.symbol.description.js";import"core-js/modules/es.symbol.iterator.js";import"core-js/modules/es.symbol.to-primitive.js";import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.date.to-primitive.js";import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.promise.js";import"core-js/modules/es.promise.finally.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/es.string.trim.js";import"core-js/modules/web.dom-collections.iterator.js";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var ChatbotSDK=function(){return _createClass((function e(t,o){_classCallCheck(this,e),this.API_KEY=t,this.id=o}),[{key:"initChatbot",value:function(){var e=this;console.log("Initializing chatbot...",this.API_KEY,this.id),setTimeout((function(){var e=document.createElement("div");e.classList.add("chatbot-container"),document.body.appendChild(e);var t=document.querySelector(".chatbot-container");console.log("chatbotContainer",t);var o=document.createElement("button");o.classList.add("chatbot-toggler"),o.innerHTML='\n        <span class="material-symbols-rounded" style="display: flex; justify-content: center; align-items: center;"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"/></svg></span>\n        <span class="material-symbols-outlined" style="display: flex; justify-content: center; align-items: center;"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></span>\n      ';var n=document.createElement("div");n.classList.add("chatbot"),n.innerHTML='\n        <header>\n          <h2>Chatbot</h2>\n          <span class="close-btn material-symbols-outlined"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></span>\n        </header>\n        <ul class="chatbox">\n          <li class="chat incoming">\n            <p>Hi there ðŸ‘‹<br />How can I help you today?</p>\n          </li>\n        </ul>\n        <div class="chat-input">\n          <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>\n          <span id="send-btn" class="material-symbols-rounded"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#7664E9"><path d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z"/></svg></span>\n        </div>\n      ',t.appendChild(o),t.appendChild(n)}),0),setTimeout((function(){var t=document.querySelector(".chat-input textarea"),o=document.querySelector(".close-btn"),n=document.querySelector(".chatbot-toggler");console.log("first",n);var i=document.querySelector(".chat-input span"),r=document.querySelector(".chatbox"),s=t.scrollHeight,a=function(e,t){var o=document.createElement("li");return o.classList.add("chat","".concat(t)),o.innerHTML="<p></p>",o.querySelector("p").textContent=e,o},c=function(){var o=t.value.trim();o&&(t.value="",t.style.height="".concat(s,"px"),r.appendChild(a(o,"outgoing")),r.scrollTo(0,r.scrollHeight),setTimeout((function(){var t=a("Thinking...","incoming");r.appendChild(t),r.scrollTo(0,r.scrollHeight),function(t,o){var n=t.querySelector("p"),i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.API_KEY)},body:JSON.stringify({message:o})};fetch("https://mlapi.qualetics.com/api/datamachine/init?id=654cb0cd9be320475ad7deb4",i).then((function(e){return e.json()})).then((function(e){n.textContent=e.choices[0].message.content.trim()})).catch((function(){n.classList.add("error"),n.textContent="Oops! Something went wrong. Please try again."})).finally((function(){return r.scrollTo(0,r.scrollHeight)}))}(t,o)}),600))};t.addEventListener("input",(function(){t.style.height="".concat(s,"px"),t.style.height="".concat(t.scrollHeight,"px")})),t.addEventListener("keydown",(function(e){"Enter"===e.key&&!e.shiftKey&&window.innerWidth>800&&(e.preventDefault(),c())})),i.addEventListener("click",c),o.addEventListener("click",(function(){return document.body.classList.remove("show-chatbot")})),n.addEventListener("click",(function(){return document.body.classList.toggle("show-chatbot")}))}),0)}}])}();window.ChatbotSDK=ChatbotSDK;