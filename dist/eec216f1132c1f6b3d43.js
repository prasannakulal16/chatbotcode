function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}import"core-js/modules/es.symbol.js";import"core-js/modules/es.symbol.description.js";import"core-js/modules/es.symbol.iterator.js";import"core-js/modules/es.symbol.to-primitive.js";import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.date.to-primitive.js";import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.promise.js";import"core-js/modules/es.promise.finally.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/es.string.trim.js";import"core-js/modules/web.dom-collections.iterator.js";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var ChatbotSDK=function(){return _createClass((function e(t){_classCallCheck(this,e),this.API_KEY=t}),[{key:"initChatbot",value:function(){var e=this,t=document.querySelector(".chat-input textarea"),o=document.querySelector(".close-btn"),n=document.querySelector(".chatbot-toggler"),r=document.querySelector(".chat-input span"),s=document.querySelector(".chatbox"),i=t.scrollHeight,a=function(e,t){var o=document.createElement("li");o.classList.add("chat","".concat(t));var n="outgoing"===t?"<p></p>":'<span class="material-symbols-outlined">smart_toy</span><p></p>';return o.innerHTML=n,o.querySelector("p").textContent=e,o},c=function(){var o=t.value.trim();o&&(t.value="",t.style.height="".concat(i,"px"),s.appendChild(a(o,"outgoing")),s.scrollTo(0,s.scrollHeight),setTimeout((function(){var t=a("Thinking...","incoming");s.appendChild(t),s.scrollTo(0,s.scrollHeight),function(t,o){var n=t.querySelector("p"),r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e.API_KEY)},body:JSON.stringify({message:o})};fetch("https://api.openai.com/v1/chat/completions",r).then((function(e){return e.json()})).then((function(e){n.textContent=e.choices[0].message.content.trim()})).catch((function(){n.classList.add("error"),n.textContent="Oops! Something went wrong. Please try again."})).finally((function(){return s.scrollTo(0,s.scrollHeight)}))}(t,o)}),600))};t.addEventListener("input",(function(){t.style.height="".concat(i,"px"),t.style.height="".concat(t.scrollHeight,"px")})),t.addEventListener("keydown",(function(e){"Enter"===e.key&&!e.shiftKey&&window.innerWidth>800&&(e.preventDefault(),c())})),r.addEventListener("click",c),o.addEventListener("click",(function(){return document.body.classList.remove("show-chatbot")})),n.addEventListener("click",(function(){return document.body.classList.toggle("show-chatbot")})),function(){var e=document.createElement("button");e.classList.add("chatbot-toggler"),e.innerHTML='\n        <span class="material-symbols-rounded">mode_comment</span>\n        <span class="material-symbols-outlined">close</span>\n      ';var t=document.createElement("div");t.classList.add("chatbot"),t.innerHTML='\n        <header>\n          <h2>Chatbot</h2>\n          <span class="close-btn material-symbols-outlined">close</span>\n        </header>\n        <ul class="chatbox">\n          <li class="chat incoming">\n            <span class="material-symbols-outlined">smart_toy</span>\n            <p>Hi there ðŸ‘‹<br />How can I help you today?</p>\n          </li>\n        </ul>\n        <div class="chat-input">\n          <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>\n          <span id="send-btn" class="material-symbols-rounded">send</span>\n        </div>\n      ',document.getElementById("chatbotContainer").appendChild(e),document.getElementById("chatbotContainer").appendChild(t)}()}}])}();export{ChatbotSDK as default};