function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}import"core-js/modules/es.symbol.js";import"core-js/modules/es.symbol.description.js";import"core-js/modules/es.symbol.iterator.js";import"core-js/modules/es.symbol.to-primitive.js";import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.date.to-primitive.js";import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.promise.js";import"core-js/modules/es.promise.finally.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/es.string.trim.js";import"core-js/modules/web.dom-collections.iterator.js";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_toPropertyKey(n.key),n)}}function _createClass(t,e,o){return e&&_defineProperties(t.prototype,e),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var ChatbotSDK=function(){return _createClass((function t(e,o){_classCallCheck(this,t),this.API_KEY=e,this.id=o}),[{key:"initChatbot",value:function(){var t=this;console.log("Initializing chatbot...",this.API_KEY,this.id),setTimeout((function(){var t=document.createElement("div");t.classList.add("chatbot-container"),document.body.appendChild(t);var e=document.querySelector(".chatbot-container");console.log("chatbotContainer",e);var o=document.createElement("button");o.classList.add("chatbot-toggler"),o.innerHTML='\n        <span class="material-symbols-rounded" style="display: flex; justify-content: center; align-items: center;"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"/></svg></span>\n        <span class="material-symbols-outlined" style="display: flex; justify-content: center; align-items: center;"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></span>\n      ';var n=document.createElement("div");n.classList.add("chatbot"),n.innerHTML='\n        <header>\n          <h2>Chatbot</h2>\n          <span class="close-btn material-symbols-outlined"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></span>\n        </header>\n        <ul class="chatbox">\n          <li class="chat incoming">\n            <p>Hi there ðŸ‘‹<br />How can I help you today?</p>\n          </li>\n        </ul>\n        <div class="chat-input">\n          <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>\n          <span id="send-btn" class="material-symbols-rounded"><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#7664E9"><path d="M120-160v-640l760 320-760 320Zm80-120 474-200-474-200v140l240 60-240 60v140Zm0 0v-400 400Z"/></svg></span>\n        </div>\n      ',e.appendChild(o),e.appendChild(n)}),0),setTimeout((function(){var e=document.querySelector(".chat-input textarea"),o=document.querySelector(".close-btn"),n=document.querySelector(".chatbot-toggler"),i=document.querySelector(".chat-input span"),r=document.querySelector(".chatbox"),s=e.scrollHeight,a=function(t,e){var o=document.createElement("li");return o.classList.add("chat","".concat(e)),o.innerHTML="<p></p>",o.querySelector("p").textContent=t,o},c=function(){var o=e.value.trim();o&&(e.value="",e.style.height="".concat(s,"px"),r.appendChild(a(o,"outgoing")),r.scrollTo(0,r.scrollHeight),setTimeout((function(){var e=a("Thinking...","incoming");r.appendChild(e),r.scrollTo(0,r.scrollHeight),function(e,o){var n="https://mlapi.qualetics.com/api/datamachine/init?id=".concat(t.id),i=e.querySelector("p"),s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.API_KEY)},body:JSON.stringify({input:o})};fetch(n,s).then((function(t){return t.json()})).then((function(t){i.textContent=t.choices[0].message.content.trim()})).catch((function(){i.classList.add("error"),i.textContent="Oops! Something went wrong. Please try again."})).finally((function(){return r.scrollTo(0,r.scrollHeight)}))}(e,o)}),600))};e.addEventListener("input",(function(){e.style.height="".concat(s,"px"),e.style.height="".concat(e.scrollHeight,"px")})),e.addEventListener("keydown",(function(t){"Enter"===t.key&&!t.shiftKey&&window.innerWidth>800&&(t.preventDefault(),c())})),i.addEventListener("click",c),o.addEventListener("click",(function(){return document.body.classList.remove("show-chatbot")})),n.addEventListener("click",(function(){return document.body.classList.toggle("show-chatbot")}))}),0)}}])}();window.ChatbotSDK=ChatbotSDK;